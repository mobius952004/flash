ğŸ“¦ root/
â”‚
â”œâ”€â”€ app.js                         # Express app setup
â”œâ”€â”€ server.js                      # HTTP + WebSocket + DB connect
â”œâ”€â”€ package.json
â”œâ”€â”€ .env                           # Env variables
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ db.js                      # Mongoose connection
â”‚   â””â”€â”€ session.js                # Session store (optional)
â”‚
â”œâ”€â”€ constants/
â”‚   â””â”€â”€ index.js                   # App-wide constants (roles, status, socket events)
â”‚
â”œâ”€â”€ middleware/
â”‚   â”œâ”€â”€ auth.middleware.js         # JWT/Session auth check
â”‚   â”œâ”€â”€ error.middleware.js        # Error formatter
â”‚   â””â”€â”€ validate.middleware.js     # Zod/Yup validation handler
â”‚
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ auth.controller.js
â”‚   â”‚   â”œâ”€â”€ auth.routes.js
â”‚   â”‚   â”œâ”€â”€ auth.service.js
â”‚   â”‚   â”œâ”€â”€ auth.dto.js
â”‚   â”‚   â””â”€â”€ auth.constants.js
â”‚   â”‚
â”‚   â”œâ”€â”€ user/
â”‚   â”‚   â”œâ”€â”€ user.controller.js
â”‚   â”‚   â”œâ”€â”€ user.routes.js
â”‚   â”‚   â”œâ”€â”€ user.service.js
â”‚   â”‚   â”œâ”€â”€ user.model.js
â”‚   â”‚   â””â”€â”€ user.dto.js
â”‚   â”‚
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ chat.controller.js
â”‚   â”‚   â”œâ”€â”€ chat.routes.js
â”‚   â”‚   â”œâ”€â”€ chat.service.js
â”‚   â”‚   â”œâ”€â”€ chat.model.js
â”‚   â”‚   â””â”€â”€ chat.dto.js
â”‚   â”‚
â”‚   â”œâ”€â”€ message/
â”‚   â”‚   â”œâ”€â”€ message.controller.js
â”‚   â”‚   â”œâ”€â”€ message.routes.js
â”‚   â”‚   â”œâ”€â”€ message.service.js
â”‚   â”‚   â”œâ”€â”€ message.model.js
â”‚   â”‚   â””â”€â”€ message.dto.js
â”‚   â”‚
â”‚   â”œâ”€â”€ call/
â”‚   â”‚   â”œâ”€â”€ call.controller.js     # Call logs, statuses
â”‚   â”‚   â”œâ”€â”€ call.routes.js         # Optional REST endpoints
â”‚   â”‚   â”œâ”€â”€ call.service.js
â”‚   â”‚   â”œâ”€â”€ call.model.js
â”‚   â”‚   â””â”€â”€ call.dto.js
â”‚
â”œâ”€â”€ sockets/
â”‚   â”œâ”€â”€ index.js                   # Registers all socket handlers
â”‚   â”œâ”€â”€ chat.socket.js             # Messaging logic
â”‚   â””â”€â”€ call.socket.js             # WebRTC signaling (offer, answer, ICE, end)
â”‚
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ hash.util.js           # Bcrypt hashing
â”‚   â”‚   â”œâ”€â”€ jwt.util.js            # Sign/verify tokens
â”‚   â”‚   â””â”€â”€ logger.js              # Custom logger
â”‚   â””â”€â”€ dto/
â”‚       â””â”€â”€ base.dto.js            # Common DTO schema helpers


| Phase                          | Feature Block                                                                                                                                              | Why / Outcome                              |
| ------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------ |
| **0â€¯â€”â€¯Foundation**             | â€¢ Project scaffolding (folders, ESLint/Prettier)<br>â€¢ `.env` + `dotenv` + `.gitignore`<br>â€¢ GitHub repo & CI lint check                                    | Clean codebase & automated checks          |
| **1â€¯â€”â€¯Core Auth (done)**       | âœ”â€¯Signup + Login (validation)<br>âœ”â€¯Session store (or JWT)<br>âœ”â€¯Logout                                                                                      | Users can create accounts & stay logged in |
| **2â€¯â€”â€¯Security Hardening**     | â€¢ **Password hashing** (`bcrypt`)<br>â€¢ Rateâ€‘limit login (`expressâ€‘rate-limit`)<br>â€¢ Helmet & CORS config<br>â€¢ Central error middleware + custom `AppError` | Prevent obvious attacks / leaks            |
| **3â€¯â€”â€¯User Module**            | â€¢ Profile retrieval & update (name, status, avatar)<br>â€¢ Avatar upload (Multerâ€¯+â€¯Cloudinary/S3)<br>â€¢ Contact search / add / block                          | Users can manage their identity            |
| **4â€¯â€”â€¯Realâ€‘Time Chat MVP**     | â€¢ Socket.IO setup<br>â€¢ 1â€‘toâ€‘1 message send / receive<br>â€¢ Persist messages in MongoDB<br>â€¢ Basic â€œdeliveredâ€ status                                        | Messaging works in realâ€‘time               |
| **5â€¯â€”â€¯UI MVP (Flutter)**       | â€¢ Auth screens<br>â€¢ Chat list + chat screen<br>â€¢ Socket connection handling                                                                                | Mobile app can actually send/receive       |
| **6â€¯â€”â€¯Group Chat**             | â€¢ Group schema & admin roles<br>â€¢ Addâ€¯/â€¯remove members<br>â€¢ Group events in Socket.IO                                                                      | Conversations beyond 1â€‘toâ€‘1                |
| **7â€¯â€”â€¯Media Messages**         | â€¢ Image/audio/video upload<br>â€¢ Message type support in DB<br>â€¢ Show thumbnails / download                                                                 | Rich messaging parity with WhatsApp        |
| **8â€¯â€”â€¯Message States**         | â€¢ â€œSent / Delivered / Seenâ€ tracking<br>â€¢ Typing indicators                                                                                                | Polished UX                                |
| **9â€¯â€”â€¯Voice & Video Calls**    | â€¢ WebRTC signalling via `call.socket.js`<br>â€¢ TURN/STUN config<br>â€¢ Flutter side via `flutter_webrtc`                                                      | Realâ€‘time P2P calls                        |
| **10â€¯â€”â€¯Presence & Push**       | â€¢ Online/offline with heartbeats<br>â€¢ FCM / APNs push notifications                                                                                        | Users know whoâ€™s online & get notified     |
| **11â€¯â€”â€¯Endâ€‘toâ€‘EndÂ Encryption** | â€¢ Diffieâ€‘Hellman key exchange<br>â€¢ Doubleâ€‘Ratchet (libsodium / Signalâ€‘protocol.js)<br>â€¢ Encrypt blobs before save                                          | Privacy & marketing edge                   |
| **12â€¯â€”â€¯Admin / Moderation**    | â€¢ Roleâ€‘based auth (admin)<br>â€¢ Ban accounts / delete chats<br>â€¢ Basic analytics dashboard                                                                  | Ops & compliance                           |
| **13â€¯â€”â€¯Scalability Prep**      | â€¢ Dockerfile + dockerâ€‘compose<br>â€¢ Add Redis + socket.ioâ€‘adapter<br>â€¢ Horizontal Mongo replicaâ€‘set                                                         | Ready for thousands of users               |
| **14â€¯â€”â€¯Monitoring & DevOps**   | â€¢ Winston + Morgan logging<br>â€¢ Prometheus / Grafana metrics<br>â€¢ CI pipeline: tests + Docker build                                                        | Stable production operations               |
| **15â€¯â€”â€¯Niceâ€‘toâ€‘Haves**         | â€¢ Story / Status feature<br>â€¢ Message reactions & stickers<br>â€¢ Themes / darkâ€‘mode toggle                                                                  | Competitive polish                         |
